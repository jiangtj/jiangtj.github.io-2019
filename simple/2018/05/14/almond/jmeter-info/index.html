<!DOCTYPE html>
<html>
<head><link rel=manifest href=/manifest.json><meta name="generator" content="Hexo 3.8.0"><link rel="manifest" href="/manifest.json">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>利用Jmeter进行压力测试 | Kurome</title>
  <meta name="description" content="A minimal hexo theme.">
  <meta name="keywords" content="">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="压力测试（Stress Test），也称为强度测试、负载测试。压力测试是模拟实际应用的软硬件环境及用户使用过程的系统负荷，长时间或超大负荷地运行测试软件，来测试被测系统的性能、可靠性、稳定性等。目前互联网的环境下，压力测试是必不可少的，其中Apache JMeter是目前主流的开源的压力测试工具。 Apache JMeter是Apache组织开发的基于Java的压力测试工具。用于对软件做压力测试，">
<meta name="keywords" content="Jmeter,压力测试">
<meta property="og:type" content="article">
<meta property="og:title" content="利用Jmeter进行压力测试">
<meta property="og:url" content="https://jiangtj.gitlab.io/2018/05/14/almond/jmeter-info/index.html">
<meta property="og:site_name" content="Kurome">
<meta property="og:description" content="压力测试（Stress Test），也称为强度测试、负载测试。压力测试是模拟实际应用的软硬件环境及用户使用过程的系统负荷，长时间或超大负荷地运行测试软件，来测试被测系统的性能、可靠性、稳定性等。目前互联网的环境下，压力测试是必不可少的，其中Apache JMeter是目前主流的开源的压力测试工具。 Apache JMeter是Apache组织开发的基于Java的压力测试工具。用于对软件做压力测试，">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://jiangtj.github.io/assets/img/others/jmeter/u1.png">
<meta property="og:image" content="https://jiangtj.github.io/assets/img/others/jmeter/u2.png">
<meta property="og:image" content="https://jiangtj.github.io/assets/img/others/jmeter/h1.png">
<meta property="og:image" content="https://jiangtj.github.io/assets/img/others/jmeter/l.png">
<meta property="og:image" content="https://jiangtj.github.io/assets/img/others/jmeter/q1.png">
<meta property="og:image" content="https://jiangtj.github.io/assets/img/others/jmeter/r1.png">
<meta property="og:image" content="https://jiangtj.github.io/assets/img/others/jmeter/mvc1.png">
<meta property="og:image" content="https://jiangtj.github.io/assets/img/others/jmeter/mvc2.png">
<meta property="og:image" content="https://jiangtj.github.io/assets/img/others/jmeter/mvc3.png">
<meta property="og:image" content="https://jiangtj.github.io/assets/img/others/jmeter/flux1.png">
<meta property="og:image" content="https://jiangtj.github.io/assets/img/others/jmeter/flux2.png">
<meta property="og:updated_time" content="2018-11-02T05:59:55.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="利用Jmeter进行压力测试">
<meta name="twitter:description" content="压力测试（Stress Test），也称为强度测试、负载测试。压力测试是模拟实际应用的软硬件环境及用户使用过程的系统负荷，长时间或超大负荷地运行测试软件，来测试被测系统的性能、可靠性、稳定性等。目前互联网的环境下，压力测试是必不可少的，其中Apache JMeter是目前主流的开源的压力测试工具。 Apache JMeter是Apache组织开发的基于Java的压力测试工具。用于对软件做压力测试，">
<meta name="twitter:image" content="https://jiangtj.github.io/assets/img/others/jmeter/u1.png">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  <script type="text/javascript">
    var HexoConfig = {
      root: '/simple/',
      search: {
        enabled: 'true'
      }
    };
  </script>

	<!-- <script src="https://use.typekit.net/eyf3hir.js"></script>
  <script>try{Typekit.load({ async: false });}catch(e){}</script> -->
  <link rel="stylesheet" href="/simple/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
  

</head>
</html>
<body>
  
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>

  <script>setLoadingBarProgress(20)</script>
  
  <div id="site-wrapper">
    
    <header id="header">
	<div id="header-wrapper" class="clearfix">
		<a id="logo" href="/simple/">
		  
			  <span id="site-title">Kurome</span>
			
			<span id="site-desc">
			  若白驹过隙，忽然而已
      </span>
		</a>
		<button id="site-nav-switch">
	    <span class="icon icon-menu"></span>
	  </button>
	</div>
	<aside id="site-menu">
  	<nav>
  		
        <a href="/simple/" class="nav-home nav">
          Home
        </a>
      
        <a href="/simple/about" class="nav-about nav">
          About
        </a>
      
        <a href="/simple/archives" class="nav-archives nav">
          Archives
        </a>
      
    </nav>
	</aside>
</header>
    <script>setLoadingBarProgress(40);</script>
    
    <main id="main" role="main">
      <article id="post-almond/jmeter-info" class="post article white-box article-type-post" itemscope="" itemprop="blogPost">
	<h2 class="title">
  	<a href="/simple/2018/05/14/almond/jmeter-info/">
    	利用Jmeter进行压力测试
    </a>
  </h2>
	<time>
	  5月 15, 2018
	</time>
	<section class="content">
  	<div class="article-entry" itemprop="articleBody">
    	<p>压力测试（Stress Test），也称为强度测试、负载测试。压力测试是模拟实际应用的软硬件环境及用户使用过程的系统负荷，长时间或超大负荷地运行测试软件，来测试被测系统的性能、可靠性、稳定性等。目前互联网的环境下，压力测试是必不可少的，其中Apache JMeter是目前主流的开源的压力测试工具。</p>
<p>Apache JMeter是Apache组织开发的基于Java的压力测试工具。用于对软件做压力测试，它最初被设计用于Web应用测试，但后来扩展到其他测试领域。 它可以用于测试静态和动态资源，例如静态文件、Java 小服务程序、CGI 脚本、Java 对象、数据库、FTP 服务器， 等等。JMeter 可以用于对服务器、网络或对象模拟巨大的负载，来自不同压力类别下测试它们的强度和分析整体性能。另外，JMeter能够对应用程序做功能/回归测试，通过创建带有断言的脚本来验证你的程序返回了你期望的结果。为了最大限度的灵活性，JMeter允许使用正则表达式创建断言。</p>
<a id="more"></a>
<h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>Jmeter可以在官网<a href="https://jmeter.apache.org/download_jmeter.cgi" target="_blank" rel="noopener">https://jmeter.apache.org/download_jmeter.cgi</a>直接下载编译过的文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://mirrors.shu.edu.cn/apache/jmeter/binaries/apache-jmeter-4.0.zip -O jmeter.zip</span><br></pre></td></tr></table></figure></p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>下载好后解压，并修改配置文件，使其启动时默认使用中文语言<br>${jmeter-dir}/bin/jmeter.properties 37行左右<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#Preferred GUI language. Comment out to use the JVM default locale&apos;s language.</span><br><span class="line">language=zh_CN</span><br></pre></td></tr></table></figure></p>
<h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p>Windows下双击jmeter.bat启动，Linux或者其他用相应的脚本启动</p>
<h1 id="测试计划"><a href="#测试计划" class="headerlink" title="测试计划"></a>测试计划</h1><p>jmeter可以自定义测试计划，比较常用的有线程组（用户组）、线程（用户）、控制器、定时器和监听器等</p>
<h2 id="线程组"><a href="#线程组" class="headerlink" title="线程组"></a>线程组</h2><p>一般都需要定义一组用户，用于模拟多用户并发请求<br><img src="https://jiangtj.github.io/assets/img/others/jmeter/u1.png" alt=""><br>如图，定义了500用户，依次在30s内递增<br><img src="https://jiangtj.github.io/assets/img/others/jmeter/u2.png" alt="">   </p>
<h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><p>线程组内定义工作内容，或者一些通用的环境等<br>例如添加公共的默认请求信息<br><img src="https://jiangtj.github.io/assets/img/others/jmeter/h1.png" alt=""><br>添加一个循环逻辑<br><img src="https://jiangtj.github.io/assets/img/others/jmeter/l.png" alt=""><br>添加一个Http请求<br><img src="https://jiangtj.github.io/assets/img/others/jmeter/q1.png" alt="">   </p>
<h2 id="监听器"><a href="#监听器" class="headerlink" title="监听器"></a>监听器</h2><p>监听器用于获取执行情况，生成或者计算相应的数据<br>例如添加响应时间的报表<br><img src="https://jiangtj.github.io/assets/img/others/jmeter/r1.png" alt="">  </p>
<h1 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h1><p>编写了一个jmeter脚本对我服务器上的两个web服务进行了压力测试，一个为webmvc，一个为webflux。由于机器的性能实在有限，出现了很多连接超时，但也有惊喜    </p>
<p>我模拟在30s内启动500个用户请求服务，每个用户请求30次中间间隔随机1-2s</p>
<h2 id="WebMVC"><a href="#WebMVC" class="headerlink" title="WebMVC"></a>WebMVC</h2><p>webmvc 在并发请求上去后，貌似服务崩了，以至于后面的请求都未完成，我在半个小时后再次访问web服务，仍然无响应。而从结果来看，数据库服务也被挤下去。   </p>
<p><img src="https://jiangtj.github.io/assets/img/others/jmeter/mvc1.png" alt=""><br><img src="https://jiangtj.github.io/assets/img/others/jmeter/mvc2.png" alt=""><br><img src="https://jiangtj.github.io/assets/img/others/jmeter/mvc3.png" alt="">   </p>
<h2 id="WebFlux"><a href="#WebFlux" class="headerlink" title="WebFlux"></a>WebFlux</h2><p>webflux 在并发方面带给我一些惊喜，500的并发对于1核1G1M的机器来说，实在的太勉强了（还跑着数据库），测试过程中也出现了较多的连接超时，但是，服务一直保持可用。也查看过CPU，在连接超时的时间，CPU已经被占满。应该是无法处理导致直接不接收相应的请求。这也导致测试完成后，服务一直保持正常，访问返回了正确结果。</p>
<p><img src="https://jiangtj.github.io/assets/img/others/jmeter/flux1.png" alt=""><br><img src="https://jiangtj.github.io/assets/img/others/jmeter/flux2.png" alt="">   </p>
<h1 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h1><h2 id="MQTT"><a href="#MQTT" class="headerlink" title="MQTT"></a>MQTT</h2><p>jmeter还有许多插件，扩展它所支持的环境，例如MQTT插件<a href="https://github.com/emqtt/mqtt-jmeter" target="_blank" rel="noopener">https://github.com/emqtt/mqtt-jmeter</a>，可用来测试MQTT服务，MQTT服务作为物联网的重要组测部分，能进行压力测试可以做到更好的评估。</p>

  	</div>

	  <div class="article-tags tags">
		  
        <a class="tag-link" href="/simple/tags/Jmeter/">Jmeter</a><a class="tag-link" href="/simple/tags/压力测试/">压力测试</a>
      
	  </div>
	</section>
</article>




      <script>setLoadingBarProgress(60);</script>
    </main>
    
    <footer id="footer" class="clearfix">
  
  
	<div class="search">
	  <form name="searchform" id="searchform" class="u-search-form">
	    <input type="text" id="searchinput" class="u-search-input" placeholder="Looking for something?">
	    <button type="submit" id="u-search-btn-submit" class="u-search-btn-submit">
	      <span class="icon icon-search"></span>
	    </button>
	  </form>
	</div>
	

	<div class="social-wrapper">
  	
      
        <a href="mailto:jiang.taojie@foxmail.com" class="social email" target="_blank" rel="external">
          <span class="icon icon-email"></span>
        </a>
      
        <a href="https://github.com/jiangtj" class="social github" target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
      
    
  </div>
  
  <div>Theme <span class="codename">Typescript</span> designed by <a href="http://rakugaki.me/" target="_blank">Art Chen</a>.</div>
  <div>&copy; <a href="/">Kurome</a></div>
  
</footer>


    <script>setLoadingBarProgress(80);</script>
    
  </div>

  



<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery.min.js"><\/script>')</script>

<script src="/simple/js/jquery.fitvids.js"></script>
<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "google";
</script>
<script src="/simple/js/search.js"></script>
<script src="/simple/js/app.js"></script>


  <script>setLoadingBarProgress(100);</script>
  
<script>if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js?t=1544754478564')
    .then(function () {console.log('ServiceWorker Register Successfully.')})
    .catch(function (e) {console.error(e)});
}
</script></body>
</html>
