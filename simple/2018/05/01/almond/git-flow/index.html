<!DOCTYPE html>
<html>
<head><link rel=manifest href=/manifest.json><meta name="generator" content="Hexo 3.8.0"><link rel="manifest" href="/manifest.json">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>Git工作流 | Kurome</title>
  <meta name="description" content="A minimal hexo theme.">
  <meta name="keywords" content="">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="选择Git工作流，和如何配合工作流工作，这是软件行业经常碰到的问题。不同的Leader会有不同方案，有好有坏。当然能应用进实际开发中的流程，只要实际操作人员足够的仔细便不会出现问题，例如最常用的Vincent Driessen提出的Git工作流。      接下来，将介绍这个Git工作流，以及它所衍生出来的其它不错的工作流（GitHub Flow与GitLab Flow）">
<meta name="keywords" content="Git">
<meta property="og:type" content="article">
<meta property="og:title" content="Git工作流">
<meta property="og:url" content="https://jiangtj.gitlab.io/2018/05/01/almond/git-flow/index.html">
<meta property="og:site_name" content="Kurome">
<meta property="og:description" content="选择Git工作流，和如何配合工作流工作，这是软件行业经常碰到的问题。不同的Leader会有不同方案，有好有坏。当然能应用进实际开发中的流程，只要实际操作人员足够的仔细便不会出现问题，例如最常用的Vincent Driessen提出的Git工作流。      接下来，将介绍这个Git工作流，以及它所衍生出来的其它不错的工作流（GitHub Flow与GitLab Flow）">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://nvie.com/img/git-model@2x.png">
<meta property="og:image" content="https://nvie.com/img/fb@2x.png">
<meta property="og:image" content="https://nvie.com/img/main-branches@2x.png">
<meta property="og:image" content="https://nvie.com/img/hotfix-branches@2x.png">
<meta property="og:image" content="https://jiangtj.github.io/assets/img/others/github-flow.png">
<meta property="og:image" content="https://docs.gitlab.com/ee/workflow/production_branch.png">
<meta property="og:image" content="https://docs.gitlab.com/ee/workflow/environment_branches.png">
<meta property="og:image" content="https://docs.gitlab.com/ee/workflow/release_branches.png">
<meta property="og:updated_time" content="2018-11-02T05:59:55.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Git工作流">
<meta name="twitter:description" content="选择Git工作流，和如何配合工作流工作，这是软件行业经常碰到的问题。不同的Leader会有不同方案，有好有坏。当然能应用进实际开发中的流程，只要实际操作人员足够的仔细便不会出现问题，例如最常用的Vincent Driessen提出的Git工作流。      接下来，将介绍这个Git工作流，以及它所衍生出来的其它不错的工作流（GitHub Flow与GitLab Flow）">
<meta name="twitter:image" content="https://nvie.com/img/git-model@2x.png">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  <script type="text/javascript">
    var HexoConfig = {
      root: '/simple/',
      search: {
        enabled: 'true'
      }
    };
  </script>

	<!-- <script src="https://use.typekit.net/eyf3hir.js"></script>
  <script>try{Typekit.load({ async: false });}catch(e){}</script> -->
  <link rel="stylesheet" href="/simple/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
  

</head>
</html>
<body>
  
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>

  <script>setLoadingBarProgress(20)</script>
  
  <div id="site-wrapper">
    
    <header id="header">
	<div id="header-wrapper" class="clearfix">
		<a id="logo" href="/simple/">
		  
			  <span id="site-title">Kurome</span>
			
			<span id="site-desc">
			  若白驹过隙，忽然而已
      </span>
		</a>
		<button id="site-nav-switch">
	    <span class="icon icon-menu"></span>
	  </button>
	</div>
	<aside id="site-menu">
  	<nav>
  		
        <a href="/simple/" class="nav-home nav">
          Home
        </a>
      
        <a href="/simple/about" class="nav-about nav">
          About
        </a>
      
        <a href="/simple/archives" class="nav-archives nav">
          Archives
        </a>
      
    </nav>
	</aside>
</header>
    <script>setLoadingBarProgress(40);</script>
    
    <main id="main" role="main">
      <article id="post-almond/git-flow" class="post article white-box article-type-post" itemscope="" itemprop="blogPost">
	<h2 class="title">
  	<a href="/simple/2018/05/01/almond/git-flow/">
    	Git工作流
    </a>
  </h2>
	<time>
	  5月 2, 2018
	</time>
	<section class="content">
  	<div class="article-entry" itemprop="articleBody">
    	<p>选择Git工作流，和如何配合工作流工作，这是软件行业经常碰到的问题。不同的Leader会有不同方案，有好有坏。当然能应用进实际开发中的流程，只要实际操作人员足够的仔细便不会出现问题，例如最常用的<a href="http://nvie.com/posts/a-successful-git-branching-model/" target="_blank" rel="noopener">Vincent Driessen提出的Git工作流</a>。     </p>
<p>接下来，将介绍这个Git工作流，以及它所衍生出来的其它不错的工作流（GitHub Flow与GitLab Flow）    </p>
<p><img src="https://nvie.com/img/git-model@2x.png" alt="">   </p>
<a id="more"></a>
<h1 id="Git-Flow-By-Vincent-Driessen"><a href="#Git-Flow-By-Vincent-Driessen" class="headerlink" title="Git Flow By Vincent Driessen"></a>Git Flow By Vincent Driessen</h1><p>如上图，它包含了全部的流程内容，一个由两个主分支develop和master以及三个支持分支hot-fix、feature、release组成的工作流。我们每次功能开发以develop分支为主，从它这里拉出feature分支，当完成时合并回develop，如下图<br><img src="https://nvie.com/img/fb@2x.png" alt="">   </p>
<p>当开发完成，将develop发布到一release分支上进行测试以及bug修复。测试通过后将release分支的代码合并到master，作为一版本发布<br><img src="https://nvie.com/img/main-branches@2x.png" alt=""></p>
<p>线上问题，是常见的情况，无论是谁都不可能保证自己的代码不出问题。这时需要从master的tags（一般每次版本发布都需打上tags）中拉出修复分支hot-fix，修复并测试该问题。当完成后，须将此次更新同时合并到master和develop<br><img src="https://nvie.com/img/hotfix-branches@2x.png" alt=""></p>
<p>Vincent Driessen作为首个Git成功模型的提出者，值得敬佩。后来的许多分支管理流程或多或少都有参照他的设计。    </p>
<h1 id="简化：GitHub-Flow"><a href="#简化：GitHub-Flow" class="headerlink" title="简化：GitHub Flow"></a>简化：GitHub Flow</h1><p>GitHub Flow也是个‘非常常用’的分支管理流程，一般它只在开源项目中使用。它是个十分轻量的分支管理流程，去掉了诸如hot-fix、release、develop分支，仅仅保留了master与feature，当然这里的feature也可当作hot-fix分支<br><img src="https://jiangtj.github.io/assets/img/others/github-flow.png" alt="">   </p>
<p>如图，当我们需要进行开发或者修复bug时，我们首先从master拉出一个feature/hot-fix分支，当完成开发，接下来是测试与讨论，并持续改进，当完善后，将该部分代码合并入master。至此，一个功能或者一个Bug修复开发完成了。相对Git Flow，减少了许多分支，可以让开发者更专注于功能的开发，同时也减少了不同分支间切换出错的概率。当然，也导致了分支间的定义不够，如遇到需要版本的情况，该怎么定义版本分支，遇到企业内部的测试环境，又该怎么区分呢？     </p>
<h1 id="演进：GitLab-Flow"><a href="#演进：GitLab-Flow" class="headerlink" title="演进：GitLab Flow"></a>演进：GitLab Flow</h1><p>GitLab Flow是基于GitHub Flow提出的，它的目的是为了解决上述企业中可能遇到的问题，同时保持足够的简化。GitLab Flow在实施过程中，十分重视上游优先的原则。一般情况下，只允许将上游的分支的代码部署到下游。</p>
<h2 id="Production-branch"><a href="#Production-branch" class="headerlink" title="Production branch"></a>Production branch</h2><p>GitLab Flow总共提出了三种场景下分别使用不同的分支模型，最简单的是产品分支模型。它与GitHub Flow唯一的不同，仅多了一个production分支，当我们觉得master上的代码足够成熟，将代码合并到production上。在这个模型中master属于production的上游分支，所有的更改只在master上修改。当完善后拉到production上。<br><img src="https://docs.gitlab.com/ee/workflow/production_branch.png" alt=""></p>
<h2 id="Environment-branches"><a href="#Environment-branches" class="headerlink" title="Environment branches"></a>Environment branches</h2><p>之前，就提问过，遇到测试环境怎么办？这时候我们需要引入环境分支，例如pre-production分支进行测试。它的模型结构与Production branch基本一致，不详说<br><img src="https://docs.gitlab.com/ee/workflow/environment_branches.png" alt=""></p>
<h2 id="Release-branches"><a href="#Release-branches" class="headerlink" title="Release branches"></a>Release branches</h2><p>Release branches是GitLab提出的第三种分支模型，它适用于您需要将产品发布到外部的情况。它与Environment branches模型不同，它使用版本的分支代替了production分支。当然，一个项目中可能存在多个版本分支，这取决于您维护的版本数。<br><img src="https://docs.gitlab.com/ee/workflow/release_branches.png" alt=""><br>就我而言，比较喜欢Release branches，因为比较喜欢<a href="https://semver.org/lang/zh-CN/" target="_blank" rel="noopener">语义化版本</a>   </p>
<h2 id="技巧"><a href="#技巧" class="headerlink" title="技巧"></a>技巧</h2><ul>
<li>Q:如果同时有多个更新在master上，其中一个较为紧急，怎么优先发布（或者存在一个Bug修复，如何合并到维护的release分支）？</li>
<li>A:可以使用git cherry-picked拉取某次提交到指定分支</li>
</ul>
<h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p><a href="https://nvie.com/posts/a-successful-git-branching-model/" target="_blank" rel="noopener">Git Flow By Vincent Driessen</a><br><a href="https://guides.github.com/introduction/flow/" target="_blank" rel="noopener">GitHub Flow</a><br><a href="https://docs.gitlab.com/ee/workflow/gitlab_flow.html" target="_blank" rel="noopener">GitLab Flow</a>    </p>

  	</div>

	  <div class="article-tags tags">
		  
        <a class="tag-link" href="/simple/tags/Git/">Git</a>
      
	  </div>
	</section>
</article>




      <script>setLoadingBarProgress(60);</script>
    </main>
    
    <footer id="footer" class="clearfix">
  
  
	<div class="search">
	  <form name="searchform" id="searchform" class="u-search-form">
	    <input type="text" id="searchinput" class="u-search-input" placeholder="Looking for something?">
	    <button type="submit" id="u-search-btn-submit" class="u-search-btn-submit">
	      <span class="icon icon-search"></span>
	    </button>
	  </form>
	</div>
	

	<div class="social-wrapper">
  	
      
        <a href="mailto:jiang.taojie@foxmail.com" class="social email" target="_blank" rel="external">
          <span class="icon icon-email"></span>
        </a>
      
        <a href="https://github.com/jiangtj" class="social github" target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
      
    
  </div>
  
  <div>Theme <span class="codename">Typescript</span> designed by <a href="http://rakugaki.me/" target="_blank">Art Chen</a>.</div>
  <div>&copy; <a href="/">Kurome</a></div>
  
</footer>


    <script>setLoadingBarProgress(80);</script>
    
  </div>

  



<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery.min.js"><\/script>')</script>

<script src="/simple/js/jquery.fitvids.js"></script>
<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "google";
</script>
<script src="/simple/js/search.js"></script>
<script src="/simple/js/app.js"></script>


  <script>setLoadingBarProgress(100);</script>
  
<script>if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js?t=1544710607071')
    .then(function () {console.log('ServiceWorker Register Successfully.')})
    .catch(function (e) {console.error(e)});
}
</script></body>
</html>
